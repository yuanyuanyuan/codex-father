# MVP1 æ‰‹åŠ¨æµ‹è¯•è®¡åˆ’

**æµ‹è¯•æ—¥æœŸ**: 2025-10-01 **æµ‹è¯•äººå‘˜**: å¾…æ‰§è¡Œ **æµ‹è¯•ç¯å¢ƒ**:

- Node.js: 18+
- TypeScript: 5.3+
- Codex CLI: å·²å®‰è£…å¹¶é…ç½®

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯ MVP1 TypeScript MCP Server çš„ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

1. âœ… MCP æœåŠ¡å™¨å¯åŠ¨å’Œå…³é—­
2. âœ… MCP åè®®é€šä¿¡ï¼ˆä½¿ç”¨ MCP Inspectorï¼‰
3. âœ… å•è¿›ç¨‹ä¼šè¯ç®¡ç†
4. âœ… äº‹ä»¶æ—¥å¿—è®°å½•
5. âœ… å®¡æ‰¹æœºåˆ¶ï¼ˆç­–ç•¥å¼•æ“ + ç»ˆç«¯ UIï¼‰
6. âœ… é…ç½®æŒä¹…åŒ–
7. âœ… è¿›ç¨‹å¥åº·æ£€æŸ¥å’Œé‡å¯
8. âœ… é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ

---

## ğŸ“‹ æµ‹è¯•å‰å‡†å¤‡

### 1. ç¯å¢ƒæ£€æŸ¥

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version
# æœŸæœ›: v18.x æˆ–æ›´é«˜

# æ£€æŸ¥ npm ç‰ˆæœ¬
npm --version
# æœŸæœ›: 9.x æˆ–æ›´é«˜

# æ£€æŸ¥ Codex CLI æ˜¯å¦å®‰è£…
codex --version
# æœŸæœ›: æ˜¾ç¤ºç‰ˆæœ¬å·

# æ£€æŸ¥ Codex ç™»å½•çŠ¶æ€
codex auth status
# æœŸæœ›: æ˜¾ç¤ºå·²ç™»å½•
```

### 2. é¡¹ç›®æ„å»º

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /data/codex-father

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œç±»å‹æ£€æŸ¥
npm run typecheck

# è¿è¡Œ lint æ£€æŸ¥
npm run lint:check

# æœŸæœ›: æ‰€æœ‰æ£€æŸ¥é€šè¿‡ âœ…
```

### 3. æ¸…ç†æ—§æ•°æ®ï¼ˆå¯é€‰ï¼‰

```bash
# å¤‡ä»½æ—§ä¼šè¯æ•°æ®
mv .codex-father .codex-father.backup.$(date +%Y%m%d_%H%M%S)

# æˆ–è€…ç›´æ¥åˆ é™¤
rm -rf .codex-father

# é‡æ–°åˆ›å»ºç›®å½•
mkdir -p .codex-father/sessions
```

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: MCP æœåŠ¡å™¨åŸºæœ¬å¯åŠ¨å’Œå…³é—­ â­

**ç›®æ ‡**: éªŒè¯ MCP æœåŠ¡å™¨èƒ½å¤Ÿæ­£å¸¸å¯åŠ¨å’Œä¼˜é›…å…³é—­

**æ­¥éª¤**:

```bash
# 1. å¯åŠ¨ MCP æœåŠ¡å™¨ï¼ˆå‰å°æ¨¡å¼ï¼Œä¾¿äºè§‚å¯Ÿæ—¥å¿—ï¼‰
npm start

# æœŸæœ›è¾“å‡º:
# âœ“ MCP Server initialized
# âœ“ Process manager started
# âœ“ Listening on stdio...
# â†’ codex-father MCP server is ready
```

**éªŒè¯ç‚¹**:

- [ ] æœåŠ¡å™¨æˆåŠŸå¯åŠ¨ï¼Œæ— é”™è¯¯æ—¥å¿—
- [ ] æ˜¾ç¤º "MCP server is ready" æ¶ˆæ¯
- [ ] è¿›ç¨‹ç®¡ç†å™¨å·²å¯åŠ¨

**åœæ­¢æœåŠ¡å™¨**:

```bash
# æŒ‰ Ctrl+C å‘é€ SIGINT
# æˆ–åœ¨å¦ä¸€ä¸ªç»ˆç«¯
kill -SIGINT <pid>

# æœŸæœ›è¾“å‡º:
# â†’ Received SIGINT, shutting down gracefully...
# âœ“ MCP Server stopped
# âœ“ Process manager stopped
# â†’ Shutdown complete
```

**éªŒè¯ç‚¹**:

- [ ] ä¼˜é›…å…³é—­ï¼Œæ— é”™è¯¯
- [ ] æ‰€æœ‰å­è¿›ç¨‹è¢«æ¸…ç†
- [ ] ä¼šè¯æ•°æ®å·²ä¿å­˜

---

### åœºæ™¯ 2: MCP Inspector è¿æ¥æµ‹è¯• â­

**ç›®æ ‡**: ä½¿ç”¨ MCP Inspector è¿æ¥å¹¶æµ‹è¯•åè®®é€šä¿¡

**æ­¥éª¤**:

```bash
# 1. ä½¿ç”¨ MCP Inspector å¯åŠ¨æœåŠ¡å™¨
npx @modelcontextprotocol/inspector npm start

# æœŸæœ›:
# - è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
# - æ˜¾ç¤º MCP Inspector UI
# - å·¦ä¾§æ˜¾ç¤º "Connected" çŠ¶æ€
```

**åœ¨ Inspector ä¸­æµ‹è¯•**:

#### æµ‹è¯• 2.1: Initialize

```json
// ç‚¹å‡» "Connect" æŒ‰é’®
// æœŸæœ›å“åº”:
{
  "protocolVersion": "2024-11-05",
  "capabilities": {
    "tools": {},
    "notifications": {}
  },
  "serverInfo": {
    "name": "codex-father",
    "version": "1.0.0"
  }
}
```

**éªŒè¯ç‚¹**:

- [ ] åè®®ç‰ˆæœ¬æ­£ç¡®
- [ ] capabilities åŒ…å« tools å’Œ notifications
- [ ] serverInfo.name ä¸º "codex-father"

#### æµ‹è¯• 2.2: Tools/List

```json
// ç‚¹å‡» "List Tools" æŒ‰é’®
// æœŸæœ›å“åº”:
{
  "tools": [
    {
      "name": "chat",
      "description": "Send a chat message to Codex",
      "inputSchema": {
        "type": "object",
        "properties": {
          "message": { "type": "string" },
          "sessionName": { "type": "string" },
          "model": { "type": "string" }
        },
        "required": ["message"]
      }
    },
    {
      "name": "execute",
      "description": "Execute a Codex task",
      "inputSchema": {
        /* ... */
      }
    },
    {
      "name": "read-file",
      "description": "Read a file from the workspace",
      "inputSchema": {
        /* ... */
      }
    },
    {
      "name": "apply-patch",
      "description": "Apply a patch to a file",
      "inputSchema": {
        /* ... */
      }
    }
  ]
}
```

**éªŒè¯ç‚¹**:

- [ ] è¿”å› 4 ä¸ªå·¥å…·å®šä¹‰
- [ ] æ¯ä¸ªå·¥å…·æœ‰ nameã€descriptionã€inputSchema
- [ ] inputSchema æ ¼å¼æ­£ç¡®ï¼ˆJSON Schemaï¼‰

#### æµ‹è¯• 2.3: Tools/Call - Chat

```json
// ç‚¹å‡» "Call Tool" â†’ é€‰æ‹© "chat"
// è¾“å…¥å‚æ•°:
{
  "message": "Hello, what is 2+2?",
  "sessionName": "test-chat",
  "model": "claude-3-5-sonnet-20241022"
}

// æœŸæœ›å“åº”ï¼ˆå¿«é€Ÿè¿”å› < 500msï¼‰:
{
  "content": [
    {
      "type": "text",
      "text": "{\n  \"status\": \"accepted\",\n  \"jobId\": \"job-abc123\",\n  \"conversationId\": \"conv-xyz789\",\n  \"message\": \"Task started\"\n}"
    }
  ],
  "isError": false
}
```

**éªŒè¯ç‚¹**:

- [ ] å¿«é€Ÿè¿”å›ï¼ˆ< 500msï¼‰
- [ ] è¿”å› jobId å’Œ conversationId
- [ ] status ä¸º "accepted"

**è§‚å¯Ÿé€šçŸ¥**:

```json
// åœ¨ "Notifications" é¢æ¿åº”è¯¥é™†ç»­æ”¶åˆ°:
{
  "method": "notifications/message",
  "params": {
    "level": "info",
    "logger": "codex-father",
    "data": {
      "jobId": "job-abc123",
      "eventType": "task-started",
      "eventData": {
        /* ... */
      },
      "timestamp": "2025-10-01T..."
    }
  }
}

// åç»­é€šçŸ¥:
// - agent-message (Codex çš„å›å¤)
// - task-completed (ä»»åŠ¡å®Œæˆ)
```

**éªŒè¯ç‚¹**:

- [ ] æ”¶åˆ° task-started é€šçŸ¥
- [ ] æ”¶åˆ° agent-message é€šçŸ¥
- [ ] æ”¶åˆ° task-completed é€šçŸ¥
- [ ] jobId ä¸€è‡´

---

### åœºæ™¯ 3: ä¼šè¯ç›®å½•å’Œæ—¥å¿—éªŒè¯ â­

**ç›®æ ‡**: éªŒè¯ä¼šè¯ç›®å½•ç»“æ„å’Œäº‹ä»¶æ—¥å¿—è®°å½•

**æ­¥éª¤**:

```bash
# 1. åˆ—å‡ºä¼šè¯ç›®å½•
ls -la .codex-father/sessions/

# æœŸæœ›è¾“å‡º:
# drwxr-xr-x  test-chat-2025-10-01/

# 2. æŸ¥çœ‹ä¼šè¯ç›®å½•å†…å®¹
ls -la .codex-father/sessions/test-chat-2025-10-01/

# æœŸæœ›è¾“å‡º:
# -rw-r--r--  events.jsonl
# -rw-r--r--  config.json
# -rw-r--r--  rollout-ref.txt  (å¦‚æœæœ‰)
```

**éªŒè¯äº‹ä»¶æ—¥å¿—**:

```bash
# 3. æŸ¥çœ‹äº‹ä»¶æ—¥å¿—
cat .codex-father/sessions/test-chat-2025-10-01/events.jsonl

# æœŸæœ›æ ¼å¼ï¼ˆæ¯è¡Œä¸€ä¸ª JSONï¼‰:
# {"type":"session-created","sessionId":"...","timestamp":"2025-10-01T..."}
# {"type":"task-started","jobId":"job-abc123","timestamp":"2025-10-01T..."}
# {"type":"agent-message","jobId":"job-abc123","content":"2+2 equals 4","timestamp":"..."}
# {"type":"task-completed","jobId":"job-abc123","duration":5000,"timestamp":"..."}
```

**éªŒè¯é…ç½®æ–‡ä»¶**:

```bash
# 4. æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat .codex-father/sessions/test-chat-2025-10-01/config.json | jq

# æœŸæœ›è¾“å‡º:
{
  "sessionId": "...",
  "sessionName": "test-chat",
  "conversationId": "conv-xyz789",
  "model": "claude-3-5-sonnet-20241022",
  "cwd": "/data/codex-father",
  "createdAt": "2025-10-01T...",
  "status": "completed"
}
```

**éªŒè¯ç‚¹**:

- [ ] ä¼šè¯ç›®å½•å·²åˆ›å»ºï¼Œå‘½åæ ¼å¼æ­£ç¡®
- [ ] events.jsonl å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®ï¼ˆæ¯è¡Œä¸€ä¸ª JSONï¼‰
- [ ] config.json å­˜åœ¨ä¸”åŒ…å«å®Œæ•´é…ç½®
- [ ] æ‰€æœ‰å­—æ®µç±»å‹æ­£ç¡®

---

### åœºæ™¯ 4: å®¡æ‰¹æœºåˆ¶æµ‹è¯• - ç™½åå•è‡ªåŠ¨æ‰¹å‡† â­

**ç›®æ ‡**: éªŒè¯ç™½åå•å‘½ä»¤è‡ªåŠ¨æ‰¹å‡†

**å‰ç½®æ¡ä»¶**: ç¡®ä¿å®¡æ‰¹ç­–ç•¥é…ç½®æ­£ç¡®

```bash
# æŸ¥çœ‹å®¡æ‰¹ç­–ç•¥é…ç½®
cat core/approval/policy-engine.ts | grep -A 10 "DEFAULT_WHITELIST"

# æœŸæœ›åŒ…å«:
# - ^git status
# - ^git diff
# - ^git log
# - ^ls
# - ^cat
```

**æ­¥éª¤ï¼ˆä½¿ç”¨ MCP Inspectorï¼‰**:

```json
// 1. è°ƒç”¨ execute å·¥å…·ï¼Œæ‰§è¡Œç™½åå•å‘½ä»¤
{
  "tool": "execute",
  "arguments": {
    "command": "git status",
    "cwd": "/data/codex-father",
    "sessionName": "test-approval-whitelist"
  }
}

// æœŸæœ›å“åº”ï¼ˆå¿«é€Ÿè¿”å›ï¼‰:
{
  "content": [
    {
      "type": "text",
      "text": "{\n  \"status\": \"accepted\",\n  \"jobId\": \"job-def456\",\n  \"message\": \"Command approved by whitelist\"\n}"
    }
  ]
}
```

**éªŒè¯ç‚¹**:

- [ ] å‘½ä»¤è‡ªåŠ¨æ‰¹å‡†ï¼Œæ— éœ€äººå·¥å¹²é¢„
- [ ] å¿«é€Ÿè¿”å›ï¼ˆ< 500msï¼‰
- [ ] æ—¥å¿—ä¸­è®°å½• "Command approved by whitelist"

**æŸ¥çœ‹äº‹ä»¶æ—¥å¿—**:

```bash
cat .codex-father/sessions/test-approval-whitelist-*/events.jsonl | grep approval

# æœŸæœ›è¾“å‡ºï¼ˆåŒ…å«ï¼‰:
# {"type":"approval-auto-approved","reason":"whitelist-match",...}
```

---

### åœºæ™¯ 5: å®¡æ‰¹æœºåˆ¶æµ‹è¯• - ç»ˆç«¯ UI äººå·¥å®¡æ‰¹ â­âš ï¸

**ç›®æ ‡**: éªŒè¯éç™½åå•å‘½ä»¤è§¦å‘ç»ˆç«¯ UI å®¡æ‰¹

**æ³¨æ„**: è¿™ä¸ªæµ‹è¯•éœ€è¦**äººå·¥äº¤äº’**

**æ­¥éª¤ 1: å‡†å¤‡ç»ˆç«¯**

```bash
# 1. åœ¨ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ MCP æœåŠ¡å™¨ï¼ˆå‰å°æ¨¡å¼ï¼Œèƒ½çœ‹åˆ°å®¡æ‰¹ UIï¼‰
npm start
```

**æ­¥éª¤ 2: åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨ MCP Inspector**

```bash
# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ Inspector
npx @modelcontextprotocol/inspector npm start
```

**æ­¥éª¤ 3: å‘é€éç™½åå•å‘½ä»¤**

```json
// åœ¨ Inspector ä¸­è°ƒç”¨ execute å·¥å…·
{
  "tool": "execute",
  "arguments": {
    "command": "npm install lodash",
    "cwd": "/data/codex-father",
    "sessionName": "test-approval-manual"
  }
}
```

**æ­¥éª¤ 4: è§‚å¯Ÿå®¡æ‰¹ UIï¼ˆç¬¬ä¸€ä¸ªç»ˆç«¯ï¼‰**

æœŸæœ›æ˜¾ç¤ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¡æ‰¹è¯·æ±‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼šè¯: test-approval-manual                              â”‚
â”‚ å‘½ä»¤: npm install lodash                                â”‚
â”‚ å·¥ä½œç›®å½•: /data/codex-father                            â”‚
â”‚ ç­‰å¾…æ—¶é—´: 0:00:05                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [A] æ‰¹å‡†  [D] æ‹’ç»  [W] åŠ å…¥ç™½åå•  [S] è·³è¿‡           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ­¥éª¤ 5: äººå·¥æ“ä½œ**

```bash
# æµ‹è¯•æ‰¹å‡†
æŒ‰ A é”® â†’ Enter

# æœŸæœ›:
# âœ“ å‘½ä»¤å·²æ‰¹å‡†
# â†’ è¿”å› Inspectorï¼Œæ”¶åˆ°æˆåŠŸå“åº”
```

**éªŒè¯ç‚¹**:

- [ ] ç»ˆç«¯ UI æ­£ç¡®æ˜¾ç¤ºå®¡æ‰¹è¯·æ±‚
- [ ] æ˜¾ç¤ºå‘½ä»¤ã€å·¥ä½œç›®å½•ã€ç­‰å¾…æ—¶é—´
- [ ] å¿«æ·é”® A/D/W/S æ­£å¸¸å·¥ä½œ
- [ ] æ‰¹å‡†åå‘½ä»¤æ­£å¸¸æ‰§è¡Œ
- [ ] äº‹ä»¶æ—¥å¿—è®°å½•å®¡æ‰¹å†³ç­–

**æµ‹è¯•æ‹’ç»**:

```json
// å†æ¬¡å‘é€å‘½ä»¤
{
  "tool": "execute",
  "arguments": {
    "command": "rm -rf /tmp/test",
    "cwd": "/data/codex-father",
    "sessionName": "test-approval-deny"
  }
}

// åœ¨ç»ˆç«¯æŒ‰ D é”® â†’ Enter æ‹’ç»

// æœŸæœ› Inspector æ”¶åˆ°é”™è¯¯å“åº”:
{
  "content": [
    {
      "type": "text",
      "text": "Error: Command denied by user"
    }
  ],
  "isError": true
}
```

**éªŒè¯ç‚¹**:

- [ ] æ‹’ç»åå‘½ä»¤ä¸æ‰§è¡Œ
- [ ] è¿”å›é”™è¯¯å“åº”
- [ ] äº‹ä»¶æ—¥å¿—è®°å½•æ‹’ç»å†³ç­–

---

### åœºæ™¯ 6: å¤šä¼šè¯ç®¡ç†æµ‹è¯• â­

**ç›®æ ‡**: éªŒè¯å•è¿›ç¨‹ç®¡ç†å¤šä¸ªä¼šè¯ï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰

**æ­¥éª¤ï¼ˆä½¿ç”¨ MCP Inspectorï¼‰**:

```json
// 1. å¿«é€Ÿè¿ç»­å‘é€ 3 ä¸ªä»»åŠ¡
// ä»»åŠ¡ 1
{
  "tool": "chat",
  "arguments": {
    "message": "Count from 1 to 5 slowly",
    "sessionName": "session-1"
  }
}

// ä»»åŠ¡ 2ï¼ˆç«‹å³å‘é€ï¼Œä¸ç­‰å¾…ä»»åŠ¡ 1 å®Œæˆï¼‰
{
  "tool": "chat",
  "arguments": {
    "message": "What is the capital of France?",
    "sessionName": "session-2"
  }
}

// ä»»åŠ¡ 3ï¼ˆç«‹å³å‘é€ï¼‰
{
  "tool": "chat",
  "arguments": {
    "message": "Calculate 100 * 200",
    "sessionName": "session-3"
  }
}

// æœŸæœ›:
// - æ‰€æœ‰ä»»åŠ¡éƒ½å¿«é€Ÿè¿”å›ï¼ˆ< 500msï¼‰
// - æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ç‹¬ç«‹çš„ jobId
// - ä½†åç«¯æ˜¯ä¸²è¡Œæ‰§è¡Œï¼ˆä»»åŠ¡ 2 ç­‰å¾…ä»»åŠ¡ 1 å®Œæˆï¼‰
```

**éªŒè¯ç‚¹**:

- [ ] 3 ä¸ªä»»åŠ¡éƒ½å¿«é€Ÿè¿”å›ï¼ˆå‰ç«¯ä¸é˜»å¡ï¼‰
- [ ] 3 ä¸ªä»»åŠ¡æœ‰ä¸åŒçš„ jobId
- [ ] åˆ›å»ºäº† 3 ä¸ªä¼šè¯ç›®å½•
- [ ] é€šçŸ¥ä¸­èƒ½çœ‹åˆ°ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œ

**æŸ¥çœ‹ä¼šè¯ç›®å½•**:

```bash
ls -la .codex-father/sessions/

# æœŸæœ›è¾“å‡º:
# session-1-2025-10-01/
# session-2-2025-10-01/
# session-3-2025-10-01/
```

---

### åœºæ™¯ 7: è¿›ç¨‹å¥åº·æ£€æŸ¥å’Œé‡å¯ âš ï¸

**ç›®æ ‡**: éªŒè¯è¿›ç¨‹å´©æºƒåè‡ªåŠ¨é‡å¯

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªç ´åæ€§æµ‹è¯•ï¼Œéœ€è¦æ‰‹åŠ¨å¹²é¢„

**æ­¥éª¤**:

```bash
# 1. å¯åŠ¨ MCP æœåŠ¡å™¨
npm start

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯æŸ¥çœ‹ Codex è¿›ç¨‹
ps aux | grep "codex mcp"

# æœŸæœ›è¾“å‡º:
# user  12345  ... codex mcp

# 3. è®°å½•è¿›ç¨‹ PID
CODEX_PID=12345

# 4. æ‰‹åŠ¨æ€æ­» Codex è¿›ç¨‹ï¼ˆæ¨¡æ‹Ÿå´©æºƒï¼‰
kill -9 $CODEX_PID

# 5. è§‚å¯Ÿ MCP æœåŠ¡å™¨æ—¥å¿—
# æœŸæœ›è¾“å‡º:
# âš ï¸  Codex process crashed (PID: 12345)
# â†’ Attempting to restart...
# âœ“ Codex process restarted (PID: 12346)
```

**éªŒè¯ç‚¹**:

- [ ] æ£€æµ‹åˆ°è¿›ç¨‹å´©æºƒ
- [ ] è‡ªåŠ¨é‡å¯è¿›ç¨‹
- [ ] æ–°è¿›ç¨‹æœ‰ä¸åŒçš„ PID
- [ ] é‡å¯åæœåŠ¡æ­£å¸¸å¯ç”¨

**æµ‹è¯•é‡å¯ååŠŸèƒ½**:

```json
// åœ¨ Inspector ä¸­å†æ¬¡è°ƒç”¨ chat å·¥å…·
{
  "tool": "chat",
  "arguments": {
    "message": "Are you still working?",
    "sessionName": "test-restart"
  }
}

// æœŸæœ›: æ­£å¸¸å“åº” âœ…
```

---

### åœºæ™¯ 8: é…ç½®æ–‡ä»¶åŠ è½½æµ‹è¯•

**ç›®æ ‡**: éªŒè¯é…ç½®æ–‡ä»¶æ­£ç¡®åŠ è½½

**æ­¥éª¤**:

```bash
# 1. æ£€æŸ¥é»˜è®¤é…ç½®
cat package.json | jq '.config'

# 2. æŸ¥çœ‹å®¡æ‰¹ç­–ç•¥é…ç½®
cat core/approval/policy-engine.ts | grep -A 20 "DEFAULT_POLICY"

# 3. å¯åŠ¨æœåŠ¡å™¨ï¼Œæ£€æŸ¥æ—¥å¿—ä¸­çš„é…ç½®ä¿¡æ¯
npm start 2>&1 | grep -i "config\|policy\|whitelist"

# æœŸæœ›è¾“å‡º:
# âœ“ Loaded approval policy: UNTRUSTED mode
# âœ“ Whitelist rules: 5 patterns
# âœ“ Default model: claude-3-5-sonnet-20241022
```

**éªŒè¯ç‚¹**:

- [ ] é…ç½®æ–‡ä»¶æ­£ç¡®åŠ è½½
- [ ] å®¡æ‰¹ç­–ç•¥é…ç½®ç”Ÿæ•ˆ
- [ ] ç™½åå•è§„åˆ™åŠ è½½æ­£ç¡®

---

### åœºæ™¯ 9: é”™è¯¯å¤„ç†æµ‹è¯•

**ç›®æ ‡**: éªŒè¯å„ç§é”™è¯¯åœºæ™¯çš„å¤„ç†

#### 9.1 æ— æ•ˆå‚æ•°

```json
// åœ¨ Inspector ä¸­è°ƒç”¨ chat å·¥å…·ï¼Œç¼ºå°‘å¿…éœ€å‚æ•°
{
  "tool": "chat",
  "arguments": {
    // ç¼ºå°‘ message å‚æ•°
    "sessionName": "test-error"
  }
}

// æœŸæœ›å“åº”:
{
  "content": [
    {
      "type": "text",
      "text": "Error: Missing required parameter: message"
    }
  ],
  "isError": true
}
```

#### 9.2 ä¸å­˜åœ¨çš„å·¥å…·

```json
// è°ƒç”¨ä¸å­˜åœ¨çš„å·¥å…·
{
  "tool": "non-existent-tool",
  "arguments": {}
}

// æœŸæœ›å“åº”:
{
  "error": {
    "code": -32601,
    "message": "Method not found: non-existent-tool"
  }
}
```

#### 9.3 æ— æ•ˆçš„æ–‡ä»¶è·¯å¾„

```json
// è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶
{
  "tool": "read-file",
  "arguments": {
    "path": "/non/existent/file.txt"
  }
}

// æœŸæœ›å“åº”:
{
  "content": [
    {
      "type": "text",
      "text": "Error: File not found: /non/existent/file.txt"
    }
  ],
  "isError": true
}
```

**éªŒè¯ç‚¹**:

- [ ] é”™è¯¯ä¿¡æ¯æ¸…æ™°æ˜ç¡®
- [ ] è¿”å›æ­£ç¡®çš„é”™è¯¯ç 
- [ ] ä¸ä¼šå¯¼è‡´æœåŠ¡å™¨å´©æºƒ

---

### åœºæ™¯ 10: æ€§èƒ½åŸºå‡†æµ‹è¯•

**ç›®æ ‡**: éªŒè¯æ€§èƒ½æŒ‡æ ‡ç¬¦åˆè¦æ±‚

**æ­¥éª¤**:

```bash
# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
npm run benchmark

# æœŸæœ›è¾“å‡º:
# âœ“ tools/call Response Time
#   - should respond to tools/call within 500ms: 60ms (PASS)
# âœ“ Event Notification Latency
#   - should map event within 100ms: 1ms (PASS)
# âœ“ Memory Usage
#   - should maintain < 200MB: 100MB (PASS)
```

**éªŒè¯ç‚¹**:

- [ ] tools/call å“åº”æ—¶é—´ < 500ms
- [ ] äº‹ä»¶é€šçŸ¥å»¶è¿Ÿ < 100ms
- [ ] å†…å­˜å ç”¨ < 200MB

---

## ğŸ“Š æµ‹è¯•ç»“æœè®°å½•è¡¨

### æµ‹è¯•æ¦‚è§ˆ

| åœºæ™¯    | æµ‹è¯•é¡¹            | çŠ¶æ€      | å¤‡æ³¨         |
| ------- | ----------------- | --------- | ------------ |
| åœºæ™¯ 1  | æœåŠ¡å™¨å¯åŠ¨        | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 1  | ä¼˜é›…å…³é—­          | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 2  | Initialize        | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 2  | Tools/List        | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 2  | Tools/Call - Chat | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 3  | ä¼šè¯ç›®å½•åˆ›å»º      | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 3  | äº‹ä»¶æ—¥å¿—è®°å½•      | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 3  | é…ç½®æ–‡ä»¶ä¿å­˜      | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 4  | ç™½åå•è‡ªåŠ¨æ‰¹å‡†    | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 5  | ç»ˆç«¯ UI æ˜¾ç¤º      | â¬œï¸ å¾…æµ‹è¯• | éœ€è¦äººå·¥äº¤äº’ |
| åœºæ™¯ 5  | æ‰¹å‡†æ“ä½œ          | â¬œï¸ å¾…æµ‹è¯• | éœ€è¦äººå·¥äº¤äº’ |
| åœºæ™¯ 5  | æ‹’ç»æ“ä½œ          | â¬œï¸ å¾…æµ‹è¯• | éœ€è¦äººå·¥äº¤äº’ |
| åœºæ™¯ 6  | å¤šä¼šè¯ç®¡ç†        | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 7  | è¿›ç¨‹å´©æºƒæ£€æµ‹      | â¬œï¸ å¾…æµ‹è¯• | ç ´åæ€§æµ‹è¯•   |
| åœºæ™¯ 7  | è‡ªåŠ¨é‡å¯          | â¬œï¸ å¾…æµ‹è¯• | ç ´åæ€§æµ‹è¯•   |
| åœºæ™¯ 8  | é…ç½®åŠ è½½          | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 9  | é”™è¯¯å¤„ç†          | â¬œï¸ å¾…æµ‹è¯• |              |
| åœºæ™¯ 10 | æ€§èƒ½åŸºå‡†          | â¬œï¸ å¾…æµ‹è¯• |              |

### è¯¦ç»†æµ‹è¯•è®°å½•

**æµ‹è¯•æ—¥æœŸ**: **\*\***\_\_\_**\*\*** **æµ‹è¯•äººå‘˜**: **\*\***\_\_\_**\*\***

---

#### åœºæ™¯ 1: MCP æœåŠ¡å™¨åŸºæœ¬å¯åŠ¨å’Œå…³é—­

- [ ] æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•å¤±è´¥

**å¤±è´¥åŸå› ** (å¦‚æœå¤±è´¥):

```
è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯...
```

**æˆªå›¾/æ—¥å¿—**:

```
ç²˜è´´ç›¸å…³æ—¥å¿—...
```

---

#### åœºæ™¯ 2: MCP Inspector è¿æ¥æµ‹è¯•

- [ ] æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•å¤±è´¥

**å¤±è´¥åŸå› ** (å¦‚æœå¤±è´¥):

```
è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯...
```

**æˆªå›¾/æ—¥å¿—**:

```
ç²˜è´´ç›¸å…³æ—¥å¿—...
```

---

_(ä¸ºæ¯ä¸ªåœºæ™¯æ·»åŠ ç±»ä¼¼çš„è®°å½•æ¨¡æ¿...)_

---

## ğŸ› å·²çŸ¥é—®é¢˜è®°å½•

| é—®é¢˜ç¼–å· | åœºæ™¯ | æè¿° | ä¸¥é‡ç¨‹åº¦ | çŠ¶æ€ |
| -------- | ---- | ---- | -------- | ---- |
|          |      |      |          |      |

---

## âœ… æµ‹è¯•æ€»ç»“

**æµ‹è¯•å®Œæˆæ—¥æœŸ**: **\*\***\_\_\_**\*\***

**é€šè¿‡ç‡**: **_ / 18 (_**%)

## **å…³é”®å‘ç°**:

## **å»ºè®®æ”¹è¿›**:

**æ˜¯å¦å¯ä»¥å‘å¸ƒ**:

- [ ] æ˜¯ï¼Œæ‰€æœ‰å…³é”®æµ‹è¯•é€šè¿‡
- [ ] å¦ï¼Œå­˜åœ¨é˜»å¡æ€§é—®é¢˜

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0 **åˆ›å»ºæ—¥æœŸ**: 2025-10-01 **ç»´æŠ¤è€…**: codex-father å›¢é˜Ÿ
