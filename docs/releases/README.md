# ğŸ“‹ Codex Father å‘å¸ƒæŒ‡å—

> **ç»Ÿä¸€çš„å‘å¸ƒæµç¨‹ - ä¸»é¡¹ç›®å’ŒMCPå­åŒ…ä¸€èµ·å‘å¸ƒ**

## ğŸ¯ æ¦‚è¿°

Codex Father é‡‡ç”¨**ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç†**ç³»ç»Ÿï¼Œä¸»é¡¹ç›®å’ŒMCPå­åŒ…ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·ï¼Œé€šè¿‡ä¸€æ¬¡å‘å¸ƒæ“ä½œåŒæ—¶å‘å¸ƒä¸¤ä¸ªåŒ…ï¼š

1. **ä¸»é¡¹ç›®åŒ…** (`codex-father`) - æ ¸å¿ƒCLIå·¥å…·
2. **MCPå­åŒ…** (`@starkdev020/codex-father-mcp-server`) - MCPæœåŠ¡å™¨

---

## ğŸš€ æ ‡å‡†å‘å¸ƒæµç¨‹

### TL;DR å¿«é€Ÿå‘å¸ƒ

```bash
# 1. è´¨é‡æ£€æŸ¥
npm run test:run && npm run lint:check && npm run typecheck && npm run build

# 2. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆä¸»é¡¹ç›®å’ŒMCPå­åŒ…ä¼šè‡ªåŠ¨åŒæ­¥ï¼‰
npm version 5.0.0

# 3. æäº¤å¹¶æ¨é€
git add . && git commit -m "chore(release): prepare for v5.0.0"
git push origin main

# 4. åˆ›å»ºæ ‡ç­¾è§¦å‘è‡ªåŠ¨å‘å¸ƒ
git tag v5.0.0 && git push origin v5.0.0

# 5. éªŒè¯å‘å¸ƒ
npx codex-father@5.0.0 --version
npx @starkdev020/codex-father-mcp-server@5.0.0 --help
```

---

## ğŸ“‹ è¯¦ç»†å‘å¸ƒæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå‘å¸ƒå‰å‡†å¤‡

#### 1. ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆå¿…é¡»é€šè¿‡ï¼‰

```bash
# æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡
npm run test:run

# ä»£ç æ£€æŸ¥å¿…é¡»é€šè¿‡
npm run lint:check

# ç±»å‹æ£€æŸ¥å¿…é¡»é€šè¿‡
npm run typecheck

# æ„å»ºå¿…é¡»æˆåŠŸ
npm run build

# npx åŠŸèƒ½æµ‹è¯•
./test_npx_usage.sh
```

**âš ï¸ é‡è¦ï¼šç»å¯¹ç¦æ­¢è·³è¿‡ä»»ä½•æ£€æŸ¥ï¼æ‰€æœ‰æ£€æŸ¥å¿…é¡»é€šè¿‡æ‰èƒ½ç»§ç»­ã€‚**

#### 2. ç¡®è®¤GitçŠ¶æ€å¹²å‡€

```bash
# æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€
git status

# ç¡®ä¿æ— æœªæäº¤æ›´æ”¹
git diff --check

# ç¡®ä¿åœ¨mainåˆ†æ”¯
git branch
```

#### 3. æ›´æ–°æ–‡æ¡£

```bash
# æ›´æ–°CHANGELOG
vim CHANGELOG.md

# åˆ›å»ºç‰ˆæœ¬è¯´æ˜æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
cp docs/releases/VERSION_TEMPLATE.md docs/releases/versions/VERSION_5.0.0.md
vim docs/releases/versions/VERSION_5.0.0.md
```

---

### ç¬¬äºŒæ­¥ï¼šæ›´æ–°ç‰ˆæœ¬å·

```bash
# æ›´æ–°ä¸»é¡¹ç›®ç‰ˆæœ¬å·
npm version 5.0.0

# æ³¨æ„ï¼šMCPå­åŒ…ç‰ˆæœ¬å·ä¼šåœ¨CI/CDæµç¨‹ä¸­è‡ªåŠ¨åŒæ­¥
```

**ç‰ˆæœ¬å·æ ¼å¼è¦æ±‚ï¼š**
- âœ… æ­£ç¡®ï¼š`5.0.0`, `3.2.1`, `2.5.3`
- âŒ é”™è¯¯ï¼š`v5.0.0`, `5.0`

---

### ç¬¬ä¸‰æ­¥ï¼šæäº¤ä»£ç 

```bash
# æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add .

# æäº¤ï¼ˆéµå¾ª Conventional Commits è§„èŒƒï¼‰
git commit -m "chore(release): prepare for v5.0.0"

# æ¨é€åˆ°è¿œç¨‹
git push origin main
```

**æäº¤ä¿¡æ¯è§„èŒƒï¼š**
```bash
# æ ¼å¼: <type>[optional scope]: <description>

# å¸¸ç”¨ç±»å‹:
# feat: æ–°åŠŸèƒ½
# fix: ä¿®å¤bug
# docs: æ–‡æ¡£æ›´æ–°
# chore: æ„å»ºå·¥å…·ã€ä¾èµ–æ›´æ–°ç­‰

# ç¤ºä¾‹:
git commit -m "chore(release): prepare for v5.0.0"
```

---

### ç¬¬å››æ­¥ï¼šåˆ›å»ºæ ‡ç­¾è§¦å‘å‘å¸ƒ

```bash
# åˆ›å»ºGitæ ‡ç­¾ï¼ˆå¿…é¡»ä»¥vå¼€å¤´ï¼‰
git tag v5.0.0

# æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ï¼ˆè‡ªåŠ¨è§¦å‘GitHub Actionså‘å¸ƒï¼‰
git push origin v5.0.0
```

**å‘ç”Ÿçš„äº‹æƒ…ï¼š**
1. âœ… GitHub Actionsè‡ªåŠ¨è§¦å‘
2. âœ… è¿è¡Œæ‰€æœ‰è´¨é‡æ£€æŸ¥
3. âœ… æ„å»ºä¸»é¡¹ç›®å’ŒMCPå­åŒ…
4. âœ… åŒæ­¥MCPå­åŒ…ç‰ˆæœ¬å·
5. âœ… å‘å¸ƒä¸»é¡¹ç›®åˆ°NPM
6. âœ… å‘å¸ƒMCPå­åŒ…åˆ°NPM
7. âœ… åˆ›å»ºGitHub Release

---

### ç¬¬äº”æ­¥ï¼šéªŒè¯å‘å¸ƒ

#### 1. æ£€æŸ¥NPMåŒ…

```bash
# æ£€æŸ¥ä¸»é¡¹ç›®ç‰ˆæœ¬
npm view codex-father versions | grep 5.0.0

# æ£€æŸ¥MCPå­åŒ…ç‰ˆæœ¬
npm view @starkdev020/codex-father-mcp-server versions | grep 5.0.0
```

#### 2. æµ‹è¯•å®‰è£…å’Œä½¿ç”¨

```bash
# æµ‹è¯•ä¸»é¡¹ç›®ï¼ˆæ¨èä½¿ç”¨npxï¼Œé¿å…ç¼“å­˜ï¼‰
npx codex-father@5.0.0 --version
npx codex-father@5.0.0 --help

# æµ‹è¯•MCPå­åŒ…
npx @starkdev020/codex-father-mcp-server@5.0.0 --version
npx @starkdev020/codex-father-mcp-server@5.0.0 --help
```

#### 3. æ£€æŸ¥GitHub Release

```bash
# ä½¿ç”¨æµè§ˆå™¨è®¿é—®
xdg-open https://github.com/yuanyuanyuan/codex-father/releases/tag/v5.0.0

# æˆ–ä½¿ç”¨GitHub CLI
gh release view v5.0.0 -w
```

---

## ğŸ”§ å‘å¸ƒæ¨¡å¼è¯´æ˜

### 1. è‡ªåŠ¨å‘å¸ƒï¼ˆæ¨èï¼‰

**è§¦å‘æ–¹å¼ï¼š** æ¨é€Gitæ ‡ç­¾

```bash
git tag v5.0.0
git push origin v5.0.0
```

**ç‰¹ç‚¹ï¼š**
- âœ… å®Œå…¨è‡ªåŠ¨åŒ–
- âœ… æ— éœ€æ‰‹åŠ¨å¹²é¢„
- âœ… é€‚ç”¨äºæ ‡å‡†å‘å¸ƒ

### 2. æ‰‹åŠ¨è§¦å‘ï¼ˆæµ‹è¯•ç”¨ï¼‰

**è§¦å‘æ–¹å¼ï¼š** åœ¨GitHub Actionsé¡µé¢æ‰‹åŠ¨è¿è¡Œ

1. è®¿é—® GitHub Actions é¡µé¢
2. é€‰æ‹© "Main Project Release" å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow"
4. è¾“å…¥ç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼‰
5. é€‰æ‹©æ˜¯å¦ä¸ºdry-runæ¨¡å¼

**ç‰¹ç‚¹ï¼š**
- âœ… å¯ä»¥æµ‹è¯•å‘å¸ƒæµç¨‹ï¼ˆdry-runæ¨¡å¼ï¼‰
- âœ… é€‚ç”¨äºç‰¹æ®Šæƒ…å†µ

---

## ğŸ“Š å‘å¸ƒæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ä¸€æ­¥ï¼šè´¨é‡æ£€æŸ¥                                â”‚
â”‚  âœ“ è¿è¡Œæµ‹è¯•                                     â”‚
â”‚  âœ“ ä»£ç æ£€æŸ¥                                     â”‚
â”‚  âœ“ ç±»å‹æ£€æŸ¥                                     â”‚
â”‚  âœ“ æ„å»ºéªŒè¯                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬äºŒæ­¥ï¼šæ›´æ–°ç‰ˆæœ¬                                â”‚
â”‚  âœ“ æ›´æ–°ä¸»é¡¹ç›® package.json                      â”‚
â”‚  âœ“ æ›´æ–° CHANGELOG.md                           â”‚
â”‚  âœ“ åˆ›å»ºç‰ˆæœ¬è¯´æ˜æ–‡æ¡£                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ä¸‰æ­¥ï¼šæäº¤ä»£ç                                 â”‚
â”‚  âœ“ git add .                                   â”‚
â”‚  âœ“ git commit                                  â”‚
â”‚  âœ“ git push                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬å››æ­¥ï¼šåˆ›å»ºæ ‡ç­¾                                â”‚
â”‚  âœ“ git tag v5.0.0                              â”‚
â”‚  âœ“ git push origin v5.0.0                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬äº”æ­¥ï¼šè‡ªåŠ¨å‘å¸ƒï¼ˆGitHub Actionsï¼‰              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. æ„å»ºä¸»é¡¹ç›®                            â”‚   â”‚
â”‚  â”‚ 2. å‘å¸ƒä¸»é¡¹ç›®åˆ°NPM                       â”‚   â”‚
â”‚  â”‚ 3. åŒæ­¥MCPå­åŒ…ç‰ˆæœ¬å·                     â”‚   â”‚
â”‚  â”‚ 4. æ„å»ºMCPå­åŒ…                          â”‚   â”‚
â”‚  â”‚ 5. å‘å¸ƒMCPå­åŒ…åˆ°NPM                     â”‚   â”‚
â”‚  â”‚ 6. åˆ›å»ºGitHub Release                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬å…­æ­¥ï¼šéªŒè¯å‘å¸ƒ                                â”‚
â”‚  âœ“ æ£€æŸ¥NPMåŒ…ç‰ˆæœ¬                                â”‚
â”‚  âœ“ æµ‹è¯•å®‰è£…å’Œä½¿ç”¨                               â”‚
â”‚  âœ“ æ£€æŸ¥GitHub Release                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ†˜ å¸¸è§é—®é¢˜å’Œæ•…éšœæ’é™¤

### é—®é¢˜1ï¼šç‰ˆæœ¬å·æ ¼å¼é”™è¯¯

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ Invalid version format
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ç‰ˆæœ¬å·æ ¼å¼
cat package.json | grep '"version"'

# ç¡®ä¿æ ¼å¼ä¸º X.Y.Z
"version": "5.0.0"  âœ… æ­£ç¡®
"version": "v5.0.0" âŒ é”™è¯¯
```

### é—®é¢˜2ï¼šå·¥ä½œåŒºä¸å¹²å‡€

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ Working directory not clean
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æŸ¥çœ‹æœªæäº¤çš„æ›´æ”¹
git status

# æäº¤æ‰€æœ‰æ›´æ”¹
git add .
git commit -m "chore: prepare for release"

# æˆ–æš‚å­˜æ›´æ”¹
git stash
```

### é—®é¢˜3ï¼šæ ‡ç­¾å·²å­˜åœ¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ Tag already exists
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v5.0.0

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v5.0.0

# é‡æ–°åˆ›å»ºæ ‡ç­¾
git tag v5.0.0
git push origin v5.0.0
```

### é—®é¢˜4ï¼šNPMå‘å¸ƒå¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ NPM publish failed
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥NPMè®¤è¯
npm whoami

# é‡æ–°ç™»å½•
npm login

# æ£€æŸ¥GitHub Secrets
# ç¡®ä¿ NPM_TOKEN å·²é…ç½®
```

### é—®é¢˜5ï¼šCI/CDæ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ Build failed in CI/CD
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æœ¬åœ°é‡ç°é—®é¢˜
npm ci
npm run build

# æŸ¥çœ‹GitHub Actionsæ—¥å¿—
gh run list
gh run view <run-id> --log

# ä¿®å¤é—®é¢˜åé‡æ–°æ¨é€
git commit --amend
git push --force-with-lease
```

---

## ğŸ“ å‘å¸ƒæ£€æŸ¥æ¸…å•

åœ¨æ‰§è¡Œå‘å¸ƒå‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ï¼š

### âœ… ä»£ç è´¨é‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š`npm run test:run`
- [ ] ä»£ç æ£€æŸ¥é€šè¿‡ï¼š`npm run lint:check`
- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡ï¼š`npm run typecheck`
- [ ] æ„å»ºæˆåŠŸï¼š`npm run build`
- [ ] npxåŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼š`./test_npx_usage.sh`

### âœ… ç‰ˆæœ¬ç®¡ç†
- [ ] ä¸»é¡¹ç›®package.jsonç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] CHANGELOG.mdå·²æ›´æ–°
- [ ] ç‰ˆæœ¬è¯´æ˜æ–‡æ¡£å·²åˆ›å»ºï¼ˆå¯é€‰ï¼‰

### âœ… GitçŠ¶æ€
- [ ] å½“å‰åœ¨mainåˆ†æ”¯
- [ ] å·¥ä½œåŒºå¹²å‡€ï¼Œæ— æœªæäº¤æ›´æ”¹
- [ ] æ‰€æœ‰æ›´æ”¹å·²æäº¤å¹¶æ¨é€

### âœ… ç¯å¢ƒé…ç½®
- [ ] NPMè®¤è¯å·²é…ç½®ï¼ˆCI/CDéœ€è¦ï¼‰
- [ ] GitHub CLIè®¤è¯ï¼ˆç”¨äºéªŒè¯ï¼‰
- [ ] GitHub Secretså·²é…ç½®ï¼ˆNPM_TOKENï¼‰

---

## ğŸ‰ å‘å¸ƒåæ­¥éª¤

### 1. é€šçŸ¥ç”¨æˆ·

```bash
# ç¤¾äº¤åª’ä½“é€šçŸ¥
# GitHub Discussionså‘å¸–
# æŠ€æœ¯åšå®¢æ–‡ç« 
```

### 2. ç›‘æ§åé¦ˆ

```bash
# GitHub Issuesç›‘æ§
gh issue list

# NPMä¸‹è½½ç»Ÿè®¡
npm info codex-father
npm info @starkdev020/codex-father-mcp-server
```

### 3. æ›´æ–°ç›¸å…³æ–‡æ¡£

```bash
# æ›´æ–°READMEä¸­çš„å®‰è£…è¯´æ˜
vim README.md README.en.md

# æ›´æ–°ç”¨æˆ·æ–‡æ¡£
vim docs/user/installation.md
```

---

## ğŸ”— ç›¸å…³èµ„æº

### ğŸ“– æ–‡æ¡£
- [CHANGELOG](../../CHANGELOG.md) - å®Œæ•´å˜æ›´è®°å½•
- [npxä½¿ç”¨æŒ‡å—](../../NPX_RELEASE_GUIDE.md) - npxä½¿ç”¨è¯´æ˜
- [ç‰ˆæœ¬è¯´æ˜æ¨¡æ¿](./VERSION_TEMPLATE.md) - åˆ›å»ºç‰ˆæœ¬è¯´æ˜æ–‡æ¡£

### ğŸ› ï¸ è„šæœ¬å’Œå·¥å…·
- [ä¸»é¡¹ç›®å‘å¸ƒè„šæœ¬](../../scripts/release.sh)
- [å‚æ•°éªŒè¯å·¥å…·](../../lib/param_validator.sh)
- [npxæµ‹è¯•è„šæœ¬](../../test_npx_usage.sh)

### ğŸ”— å¤–éƒ¨é“¾æ¥
- **GitHub Repository**: https://github.com/yuanyuanyuan/codex-father
- **ä¸»é¡¹ç›®NPMåŒ…**: https://www.npmjs.com/package/codex-father
- **MCPå­åŒ…NPMåŒ…**: https://www.npmjs.com/package/@starkdev020/codex-father-mcp-server

### ğŸ“š å‚è€ƒèµ„æ–™
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [NPMå‘å¸ƒæ–‡æ¡£](https://docs.npmjs.com/cli/v8/commands/npm-publish)
- [GitHub Actionsæ–‡æ¡£](https://docs.github.com/en/actions)

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸå‘å¸ƒ**ï¼šå»ºç«‹ç¨³å®šçš„å‘å¸ƒèŠ‚å¥ï¼Œé¿å…ç§¯ç´¯å¤ªå¤šå˜æ›´
2. **è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šä¸¥æ ¼éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
3. **å……åˆ†æµ‹è¯•**ï¼šå‘å¸ƒå‰åœ¨æœ¬åœ°å……åˆ†æµ‹è¯•
4. **æ–‡æ¡£å…ˆè¡Œ**ï¼šæ›´æ–°æ–‡æ¡£å†å‘å¸ƒä»£ç 
5. **åŠæ—¶é€šçŸ¥**ï¼šå‘å¸ƒååŠæ—¶é€šçŸ¥ç”¨æˆ·

---

**ğŸŠ äº«å—ç®€åŒ–åçš„å‘å¸ƒæµç¨‹å§ï¼** ä¸€æ¬¡æ“ä½œï¼ŒåŒæ—¶å‘å¸ƒä¸»é¡¹ç›®å’ŒMCPå­åŒ…ã€‚

### å‘å¸ƒæ–¹å¼

#### 1. è‡ªåŠ¨è§¦å‘ï¼ˆæ¨èï¼‰
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm version 1.2.3

# 2. æ¨é€ä»£ç 
git push origin main

# 3. åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾ï¼ˆè‡ªåŠ¨è§¦å‘å‘å¸ƒï¼‰
git tag v1.2.3
git push origin v1.2.3
```

#### 2. æ‰‹åŠ¨è§¦å‘
åœ¨GitHub Actionsé¡µé¢æ‰‹åŠ¨è¿è¡Œ "Main Project Release" å·¥ä½œæµï¼Œå¯ä»¥ï¼š
- æŒ‡å®šç‰ˆæœ¬å·
- å¯ç”¨dry-runæ¨¡å¼è¿›è¡Œæµ‹è¯•

### å‘å¸ƒæµç¨‹

1. **è¾“å…¥éªŒè¯** - éªŒè¯ç‰ˆæœ¬å·æ ¼å¼å’Œå‚æ•°
2. **æ„å»ºæµ‹è¯•** - å®‰è£…ä¾èµ–ã€è¿è¡Œæµ‹è¯•ã€æ„å»ºé¡¹ç›®
3. **ç‰ˆæœ¬æ£€æŸ¥** - ç¡®ä¿ `package.json` ç‰ˆæœ¬ä¸æ ‡ç­¾åŒ¹é…
4. **NPMå‘å¸ƒ** - å‘å¸ƒåˆ°NPMå…¬å…±ä»“åº“
5. **GitHub Release** - åˆ›å»ºGitHubå‘å¸ƒé¡µé¢

### è¾“å‡ºäº§ç‰©

- NPMåŒ…ï¼š`codex-father@ç‰ˆæœ¬å·`
- GitHub Releaseï¼šåŒ…å«å‘å¸ƒè¯´æ˜å’Œä¸‹è½½é“¾æ¥
- **npx æ”¯æŒ**ï¼šæ— éœ€å®‰è£…å³å¯ç›´æ¥ä½¿ç”¨

### æœ¬åœ°è„šæœ¬æ”¯æŒ

```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
npm run build
npm pack

# éªŒè¯åŒ…ä¿¡æ¯
npm view codex-father

# æµ‹è¯• npx åŠŸèƒ½ï¼ˆæ–°å¢ï¼‰
./test_npx_usage.sh
```

---

## ğŸ“¦ MCPå­åŒ…å‘å¸ƒæµç¨‹ (@starkdev020/codex-father-mcp-server)

### å‘å¸ƒæ–¹å¼

åªèƒ½é€šè¿‡**æ‰‹åŠ¨è§¦å‘**ï¼Œåœ¨GitHub Actionsé¡µé¢è¿è¡Œ "MCP Manual Release" å·¥ä½œæµã€‚

#### å‘å¸ƒæ¨¡å¼

1. **é¢„æ£€æŸ¥æ¨¡å¼** (`preflight`)
   - ä»…æ‰§è¡Œè´¨é‡æ£€æŸ¥å’Œæ„å»º
   - ä¸æ‰§è¡Œä»»ä½•å‘å¸ƒæ“ä½œ
   - ç”¨äºå¼€å‘é˜¶æ®µéªŒè¯

2. **é¢„æ¼”æ¨¡å¼** (`dry-run`) - **æ¨èé¦–æ¬¡ä½¿ç”¨**
   - æ¨¡æ‹Ÿå®Œæ•´å‘å¸ƒæµç¨‹
   - ä¸æ‰§è¡Œå®é™…æ“ä½œ
   - æ˜¾ç¤ºæ‰€æœ‰æ­¥éª¤çš„å‡è®¾ç»“æœ

3. **æœ¬åœ°å‘å¸ƒæ¨¡å¼** (`local`)
   - æ‰§è¡Œå®Œæ•´å‘å¸ƒæµç¨‹
   - å‘å¸ƒåˆ°NPMå’Œåˆ›å»ºGitHub Release
   - éœ€è¦é…ç½® `NPM_TOKEN` å’Œ `GITHUB_TOKEN`

4. **ä»…æ ‡ç­¾æ¨¡å¼** (`tag-only`)
   - ä»…åˆ›å»ºGitæ ‡ç­¾
   - ä¸å‘å¸ƒåˆ°NPM
   - ç”¨äºç‰ˆæœ¬æ ‡è®°å’Œé‡Œç¨‹ç¢‘è®°å½•

### æœ¬åœ°è„šæœ¬æ”¯æŒ

```bash
# é¢„æ£€æŸ¥
npm run release:mcp:preflight

# é¢„æ¼”æµ‹è¯•ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰
npm run release:mcp:dry-run 3.2.1

# æœ¬åœ°å‘å¸ƒ
npm run release:mcp:local 3.2.1

# ä»…åˆ›å»ºæ ‡ç­¾
npm run release:mcp:tag 3.2.1
```

### å‘å¸ƒæµç¨‹

1. **è¾“å…¥éªŒè¯** - éªŒè¯ç‰ˆæœ¬å·æ ¼å¼(X.Y.Z)å’Œå‘å¸ƒæ¨¡å¼
2. **é¢„æ£€æŸ¥** - è´¨é‡é—¨ç¦æ£€æŸ¥å’Œæ„å»ºéªŒè¯
3. **æ„å»ºæµ‹è¯•** - æ„å»ºMCPå­åŒ…å¹¶éªŒè¯åŠŸèƒ½
4. **ç‰ˆæœ¬ä¸€è‡´æ€§æ£€æŸ¥** - æ£€æŸ¥ `package.json` ç‰ˆæœ¬å·
5. **GitçŠ¶æ€éªŒè¯** - æ£€æŸ¥åˆ†æ”¯å’Œå·¥ä½œåŒºçŠ¶æ€
6. **åˆ›å»ºGitæ ‡ç­¾** - åˆ›å»ºæ ¼å¼ä¸º `mcp-vX.Y.Z` çš„æ ‡ç­¾
7. **æ„å»ºNPMåŒ…** - åœ¨MCPå­åŒ…ç›®å½•æ„å»º
8. **å‘å¸ƒåˆ°NPM** - å‘å¸ƒåˆ°NPMå…¬å…±ä»“åº“ï¼ˆétag-onlyæ¨¡å¼ï¼‰
9. **åˆ›å»ºGitHub Release** - åˆ›å»ºGitHubå‘å¸ƒé¡µé¢ï¼ˆédry-runæ¨¡å¼ï¼‰

### è¾“å‡ºäº§ç‰©

- Gitæ ‡ç­¾ï¼š`mcp-vX.Y.Z`
- NPMåŒ…ï¼š`@starkdev020/codex-father-mcp-server@ç‰ˆæœ¬å·`
- GitHub Releaseï¼šåŒ…å«å‘å¸ƒè¯´æ˜


---

## ğŸ“‹ å‘å¸ƒå‰å‡†å¤‡æ¸…å•

### âš ï¸ **ä¸¥æ ¼éµå¾ªä»£ç è´¨é‡æ ‡å‡†**
**ç»å¯¹ç¦æ­¢è·³è¿‡ä»»ä½•pre-commit hooksæˆ–push hooksï¼æ‰€æœ‰ä»£ç å¿…é¡»é€šè¿‡å®Œæ•´çš„è´¨é‡æ£€æŸ¥æ‰èƒ½å‘å¸ƒã€‚**

#### 1. **ä»£ç è´¨é‡æ£€æŸ¥** (å¿…é¡»é€šè¿‡)
```bash
# æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡
npm run test:run

# ä»£ç æ£€æŸ¥å¿…é¡»é€šè¿‡ (æ— é”™è¯¯ï¼Œæ— è­¦å‘Š)
npm run lint:check

# ç±»å‹æ£€æŸ¥å¿…é¡»é€šè¿‡
npm run typecheck

# æ„å»ºå¿…é¡»æˆåŠŸ
npm run build

# é¢„æ£€æŸ¥å¿…é¡»é€šè¿‡ (å‘å¸ƒè„šæœ¬å†…ç½®æ£€æŸ¥)
npm run release:mcp:preflight
```

#### 2. **ç‰ˆæœ¬å·ç®¡ç†**
```bash
# æ‰‹åŠ¨æ›´æ–°ä¸»é¡¹ç›®ç‰ˆæœ¬å· (éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬)
npm version 5.0.0

# æ‰‹åŠ¨æ›´æ–°MCPå­åŒ…ç‰ˆæœ¬å·
vim mcp/codex-mcp-server/package.json
# å°†ç‰ˆæœ¬å·æ›´æ–°ä¸ºç›®æ ‡ç‰ˆæœ¬
```

**ç‰ˆæœ¬å·æ ¼å¼è¦æ±‚**ï¼š
- âœ… æ­£ç¡®ï¼š`"5.0.0"`, `"3.2.1"`, `"2.5.3"`
- âŒ é”™è¯¯ï¼š`"v5.0.0"`, `"5.0"`

æç¤ºï¼šå¦‚éœ€é¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆå¦‚ `5.0.0-beta.1`ã€`5.0.0-rc.1`ï¼‰ï¼Œè¯·é‡‡ç”¨â€œä»…æ ‡ç­¾ï¼ˆtag-onlyï¼‰æˆ–ä¸“ç”¨é¢„å‘å¸ƒæµç¨‹â€ï¼Œé¿å…å°†é¢„å‘å¸ƒåŒ…æ¨é€åˆ° NPM æ­£å¼é€šé“ï¼›ä¸»çº¿å‘å¸ƒä»è¦æ±‚ `X.Y.Z` æ ¼å¼ã€‚

#### 3. **æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥**
```bash
# å¤åˆ¶ç‰ˆæœ¬è¯´æ˜æ¨¡æ¿
cp docs/releases/VERSION_TEMPLATE.md docs/releases/versions/VERSION_MAIN_5.0.0.md

# ç¼–è¾‘ç‰ˆæœ¬è¯´æ˜ï¼Œç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦éƒ¨åˆ†
vim docs/releases/versions/VERSION_MAIN_5.0.0.md

# æ›´æ–°CHANGELOG
vim CHANGELOG.md

# æ›´æ–°å‘å¸ƒæŒ‡å—ä¸­çš„ç‰ˆæœ¬åˆ—è¡¨
vim docs/releases/README.md
```

#### 4. **GitçŠ¶æ€æ£€æŸ¥** (å¿…é¡»æ¸…æ´)
```bash
# æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€
git status

# å¿…é¡»æ— æœªæäº¤æ›´æ”¹
git diff --check

# å¿…é¡»åœ¨æ­£ç¡®åˆ†æ”¯
git branch
```

#### 5. **ç¯å¢ƒé…ç½®éªŒè¯**
```bash
# NPMè®¤è¯å¿…é¡»é…ç½®
npm whoami

# GitHub CLIè®¤è¯å¿…é¡»é…ç½®
gh auth status

# æ£€æŸ¥é¡¹ç›®ä¾èµ–
npm audit --audit-level high
```

### ğŸš¨ **Pre-commit Hooks ä¸¥æ ¼è¦æ±‚**

#### ä»£ç è´¨é‡é—¨ç¦
- **ESLint**: 0 errors, 0 warnings (ä»£ç è´¨é‡)
- **TypeScript**: ç¼–è¯‘æ— é”™è¯¯ (ç±»å‹å®‰å…¨)
- **Prettier**: ä»£ç æ ¼å¼ä¸€è‡´ (ä»£ç é£æ ¼)
- **æµ‹è¯•**: 100% é€šè¿‡ (åŠŸèƒ½æ­£ç¡®æ€§)
- **æ„å»º**: æˆåŠŸå®Œæˆ (å¯è¿è¡Œæ€§)

#### æäº¤ä¿¡æ¯è§„èŒƒ
å¿…é¡»éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š
```bash
# æ ¼å¼: <type>[optional scope]: <description>

# ç±»å‹è¯´æ˜:
# feat: æ–°åŠŸèƒ½
# fix: ä¿®å¤bug
# docs: æ–‡æ¡£æ›´æ–°
# style: ä»£ç æ ¼å¼è°ƒæ•´
# refactor: ä»£ç é‡æ„
# test: æµ‹è¯•ç›¸å…³
# chore: æ„å»ºå·¥å…·ã€ä¾èµ–æ›´æ–°ç­‰

# ç¤ºä¾‹:
# feat(release): add manual version management system
# fix(mcp): resolve authentication issues
# docs(release): update release guidelines
```

### ğŸ”’ **è´¨é‡æ£€æŸ¥å¤±è´¥å¤„ç†**

#### ESLinté”™è¯¯
```bash
# æŸ¥çœ‹å…·ä½“é”™è¯¯
npm run lint:check

# è‡ªåŠ¨ä¿®å¤ (å¦‚å¯ä¿®å¤)
npm run lint:fix

# æ‰‹åŠ¨ä¿®å¤åé‡æ–°æ£€æŸ¥
npm run lint:check
```

#### TypeScripté”™è¯¯
```bash
# æŸ¥çœ‹ç±»å‹é”™è¯¯
npm run typecheck

# ä¿®å¤ç±»å‹é—®é¢˜åé‡æ–°æ£€æŸ¥
npm run typecheck
```

#### æµ‹è¯•å¤±è´¥
```bash
# è¿è¡Œå…·ä½“æµ‹è¯•
npm test

# æŸ¥çœ‹å¤±è´¥è¯¦æƒ…
npm run test:run

# ä¿®å¤æµ‹è¯•é—®é¢˜
npm run test:run
```

#### æ„å»ºå¤±è´¥
```bash
# æ¸…ç†æ„å»ºç¼“å­˜
npm run clean

# é‡æ–°æ„å»º
npm run build

# æŸ¥çœ‹æ„å»ºæ—¥å¿—è§£å†³ä¾èµ–é—®é¢˜
npm run build
```

### ğŸ”§ ç¯å¢ƒå‡†å¤‡

#### å·¥å…·æ£€æŸ¥
```bash
# åŸºç¡€å·¥å…·
node --version    # >= 18.0.0 âœ…
npm --version     # >= 8.0.0 âœ…
git --version      # æ£€æŸ¥ç‰ˆæœ¬ âœ…

# GitHub CLI
gh auth status     # æ£€æŸ¥è®¤è¯çŠ¶æ€ âœ…

# NPM è®¤è¯ï¼ˆæœ¬åœ°å‘å¸ƒéœ€è¦ï¼‰
npm whoami         # æ£€æŸ¥ç™»å½•çŠ¶æ€ âœ…
```

#### ç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆæœ¬åœ°å‘å¸ƒï¼‰
```bash
# è®¾ç½®NPM Token
export NPM_TOKEN="your_npm_token"

# è®¾ç½®GitHub Token
export GITHUB_TOKEN="your_github_token"
```

#### GitHubä»“åº“é…ç½®
åœ¨GitHubä»“åº“è®¾ç½®ä¸­é…ç½®secretsï¼š
- `NPM_TOKEN`: NPMåŒ…å‘å¸ƒè®¤è¯ä»¤ç‰Œ
- `GITHUB_TOKEN`: GitHub Actionsè‡ªåŠ¨æä¾›

---

## âœ… å‘å¸ƒåéªŒè¯

### 1. ä¸»é¡¹ç›®éªŒè¯
```bash
# æ£€æŸ¥åŒ…ç‰ˆæœ¬
npm view codex-father versions

# å®‰è£…æµ‹è¯•
npm install -g codex-father
codex-father --version

# npx åŠŸèƒ½æµ‹è¯•ï¼ˆæ–°å¢ï¼‰
npx codex-father --help
npx codex-father status
npx codex-father-start --help
```

### 2. MCPå­åŒ…éªŒè¯
```bash
# æ£€æŸ¥åŒ…ç‰ˆæœ¬
npm view @starkdev020/codex-father-mcp-server versions

# å®‰è£…æµ‹è¯•
npm install -g @starkdev020/codex-father-mcp-server
codex-mcp-server --version
```

### 3. Gitæ ‡ç­¾éªŒè¯
```bash
# æ£€æŸ¥ä¸»é¡¹ç›®æ ‡ç­¾
git tag -l | grep "^v"

# æ£€æŸ¥MCPæ ‡ç­¾
git tag -l | grep "mcp-v"

# æŸ¥çœ‹æ ‡ç­¾è¯¦æƒ…
git show v1.2.3
git show mcp-v3.2.1
```

### 4. GitHub ReleaseéªŒè¯
```bash
# ä½¿ç”¨ GitHub CLIï¼ˆæ¨èï¼‰
gh release view -R yuanyuanyuan/codex-father -w

# æˆ– Linux æ¡Œé¢ç¯å¢ƒ
xdg-open https://github.com/yuanyuanyuan/codex-father/releases || true

# æˆ– macOS
open https://github.com/yuanyuanyuan/codex-father/releases || true
```

### 5. åŠŸèƒ½é›†æˆæµ‹è¯•
```bash
# æ–¹å¼Aï¼šä½¿ç”¨ npxï¼ˆéªŒè¯å‘å¸ƒåŒ…ï¼‰
npx codex-father mcp --version
npx codex-father mcp --help
LOG_LEVEL=debug npx codex-father mcp

# æ–¹å¼Bï¼šä½¿ç”¨ä»“åº“ç›¸å¯¹è·¯å¾„ï¼ˆéªŒè¯æœ¬åœ°æ„å»ºäº§ç‰©ï¼‰
node mcp/codex-mcp-server/dist/index.js --version
node mcp/codex-mcp-server/dist/index.js --help
LOG_LEVEL=debug node mcp/codex-mcp-server/dist/index.js
```

---

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

#### 1. ç‰ˆæœ¬å·æ ¼å¼é”™è¯¯
```
é”™è¯¯: ç‰ˆæœ¬å·æ ¼å¼æ— æ•ˆï¼Œè¯·ä½¿ç”¨ X.Y.Z æ ¼å¼
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥package.jsonä¸­çš„ç‰ˆæœ¬æ ¼å¼
cat package.json | grep '"version"'
cat mcp/codex-mcp-server/package.json | grep '"version"'

# ç¡®ä¿ç‰ˆæœ¬å·æ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬
"version": "3.2.1"  âœ… æ­£ç¡®
"version": "v3.2.1"  âŒ é”™è¯¯ï¼šåŒ…å«vå‰ç¼€
"version": "3.2"     âŒ é”™è¯¯ï¼šç¼ºå°‘è¡¥ä¸ç‰ˆæœ¬
```

#### 2. Gitå·¥ä½œåŒºä¸å¹²å‡€
```
é”™è¯¯: æ£€æµ‹åˆ°æœªæäº¤çš„æ›´æ”¹
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥çœ‹çŠ¶æ€
git status

# é€‰é¡¹1ï¼šæäº¤æ›´æ”¹ï¼ˆæ¨èï¼‰
git add .
git commit -m "chore: prepare for release"

# é€‰é¡¹2ï¼šæš‚å­˜æ›´æ”¹ï¼ˆä¸´æ—¶ï¼‰
git stash
```

#### 3. NPMè®¤è¯å¤±è´¥
```
é”™è¯¯: æœªç™»å½•NPM
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ³•1ï¼šäº¤äº’å¼ç™»å½•
npm login
# æŒ‰æç¤ºè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±

# æ–¹æ³•2ï¼šè®¾ç½®ç¯å¢ƒå˜é‡
export NPM_TOKEN="your_npm_token"
npm config set //registry.npmjs.org/:_authToken ${NPM_TOKEN}
```

#### 4. GitHub CLIè®¤è¯å¤±è´¥
```
é”™è¯¯: GitHub CLIæœªè®¤è¯
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥è®¤è¯çŠ¶æ€
gh auth status

# é‡æ–°è®¤è¯
gh auth login
# æŒ‰æç¤ºå®Œæˆè®¤è¯æµç¨‹
```

#### 5. æ„å»ºå¤±è´¥
```
é”™è¯¯: æ„å»ºæ£€æŸ¥å¤±è´¥
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ä¸»é¡¹ç›®æ„å»º
npm run build

# æ£€æŸ¥MCPå­åŒ…æ„å»º
cd mcp/codex-mcp-server
npm run build

# æ¸…ç†é‡å»º
npm run clean
npm run build
```

#### 6. æ ‡ç­¾å†²çª
```
è­¦å‘Š: æ ‡ç­¾ mcp-v3.2.1 å·²å­˜åœ¨
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é€‰æ‹©åˆ é™¤å¹¶é‡æ–°åˆ›å»ºï¼ˆæ¨èï¼‰
# å‘å¸ƒè„šæœ¬ä¼šæç¤ºç¡®è®¤

# æˆ–æ‰‹åŠ¨åˆ é™¤
git tag -d mcp-v3.2.1
git push origin :refs/tags/mcp-v3.2.1
```

### ç‰ˆæœ¬å›æ»šæµç¨‹

#### ç´§æ€¥ç‰ˆæœ¬å›æ»š
```bash
# 1. å‘å¸ƒä¿®å¤ç‰ˆæœ¬
npm run release:mcp:local 3.2.2

# 2. ä»…åˆ›å»ºæ ‡ç­¾ï¼ˆå¿«é€Ÿæ ‡è®°ï¼‰
npm run release:mcp:tag 3.2.2
```

#### Gitæ ‡ç­¾å›æ»š
```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d mcp-v3.2.1

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/mcp-v3.2.1

# é‡æ–°åˆ›å»ºæ ‡ç­¾
git tag -a mcp-v3.2.1 -m "Fixed version: ä¿®å¤å…³é”®é—®é¢˜"
git push origin mcp-v3.2.1
```

---

## ğŸ“ ç‰ˆæœ¬è¯´æ˜æ–‡æ¡£æ¨¡æ¿

### ä½¿ç”¨æ–¹æ³•

```bash
# 1. å¤åˆ¶æ¨¡æ¿
cp docs/releases/VERSION_TEMPLATE.md docs/releases/versions/VERSION_MCP_X.Y.Z.md

# 2. ç¼–è¾‘å†…å®¹
vim docs/releases/versions/VERSION_MCP_X.Y.Z.md

# 3. æ›´æ–°ç´¢å¼•
# åœ¨æœ¬README.mdä¸­æ·»åŠ ç‰ˆæœ¬é“¾æ¥
```

### å†…å®¹ç»“æ„

ç‰ˆæœ¬è¯´æ˜æ–‡æ¡£åº”åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

- **ç‰ˆæœ¬ä¿¡æ¯**ï¼šç‰ˆæœ¬å·ã€å‘å¸ƒæ—¥æœŸã€åŒ…åã€Gitæ ‡ç­¾
- **æ–°åŠŸèƒ½**ï¼šæ–°å¢çš„åŠŸèƒ½åˆ—è¡¨
- **ä¿®å¤**ï¼šä¿®å¤çš„é—®é¢˜åˆ—è¡¨
- **æ”¹è¿›**ï¼šæ€§èƒ½ä¼˜åŒ–ã€é”™è¯¯å¤„ç†æ”¹è¿›ã€æ–‡æ¡£æ›´æ–°
- **å…¼å®¹æ€§**ï¼šå‘åå…¼å®¹æ€§è¯´æ˜ã€ç ´åæ€§å˜æ›´ã€ä¾èµ–é¡¹æ›´æ–°
- **å®‰è£…å‡çº§**ï¼šå…¨æ–°å®‰è£…ã€å‡çº§ç°æœ‰å®‰è£…ã€æŒ‡å®šç‰ˆæœ¬å®‰è£…
- **æµ‹è¯•éªŒè¯**ï¼šåŸºç¡€åŠŸèƒ½æµ‹è¯•ã€é…ç½®éªŒè¯
- **å˜æ›´è¯¦æƒ…**ï¼šæ–‡ä»¶å˜æ›´ã€ä¾èµ–æ›´æ–°
- **ç›¸å…³é“¾æ¥**ï¼šGitHub Releaseã€NPMåŒ…é¡µé¢ã€æ›´æ–°æ—¥å¿—
- **æ”¯æŒåé¦ˆ**ï¼šé—®é¢˜æŠ¥å‘Šã€è´¡çŒ®æŒ‡å—

---

## ğŸ› ï¸ å‘å¸ƒè„šæœ¬è¯¦è§£

### ä¸»é¡¹ç›®å‘å¸ƒè„šæœ¬ (`scripts/release.sh`)

#### å‘å¸ƒæ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | å‘½ä»¤ |
|------|------|----------|------|
| `--dry-run` | é¢„æ¼”æ¨¡å¼ï¼Œä¸æ‰§è¡Œå®é™…å‘å¸ƒ | é¦–æ¬¡ä½¿ç”¨ã€æµ‹è¯•æµç¨‹ | `npm run release:dry-run` |
| `--local` | æœ¬åœ°å‘å¸ƒï¼Œéœ€è¦NPM_TOKEN | ç´§æ€¥å‘å¸ƒã€æœ¬åœ°æµ‹è¯• | `npm run release:local` |
| `--main` | æ¨é€åˆ°mainåˆ†æ”¯è§¦å‘CI | æ ‡å‡†å‘å¸ƒæµç¨‹ | `npm run release:main` |

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# é¢„æ¼”æ¨¡å¼ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰
npm run release:dry-run

# æœ¬åœ°å‘å¸ƒ
npm run release:local

# æ¨é€åˆ°mainåˆ†æ”¯è§¦å‘CI
npm run release:main
```

### MCPå­åŒ…å‘å¸ƒè„šæœ¬ (`scripts/release-mcp-manual.sh`)

#### å‘å¸ƒæ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | å‘½ä»¤ |
|------|------|----------|------|
| `--preflight` | ä»…æ‰§è¡Œè´¨é‡æ£€æŸ¥å’Œæ„å»º | å¼€å‘é˜¶æ®µéªŒè¯ | `npm run release:mcp:preflight` |
| `--dry-run` | é¢„æ¼”æ¨¡å¼ï¼Œä¸æ‰§è¡Œå®é™…å‘å¸ƒ | é¦–æ¬¡ä½¿ç”¨ã€æµ‹è¯•æµç¨‹ | `npm run release:mcp:dry-run X.Y.Z` |
| `--local` | æœ¬åœ°å‘å¸ƒï¼Œå®Œæ•´æµç¨‹ | ç´§æ€¥å‘å¸ƒã€æœ¬åœ°æµ‹è¯• | `npm run release:mcp:local X.Y.Z` |
| `--tag-only` | ä»…åˆ›å»ºGitæ ‡ç­¾ | ç‰ˆæœ¬æ ‡è®°ã€é‡Œç¨‹ç¢‘è®°å½• | `npm run release:mcp:tag X.Y.Z` |

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# é¢„æ£€æŸ¥
npm run release:mcp:preflight

# é¢„æ¼”æ¨¡å¼ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰
npm run release:mcp:dry-run 3.2.1

# æœ¬åœ°å‘å¸ƒ
npm run release:mcp:local 3.2.1

# ä»…åˆ›å»ºæ ‡ç­¾
npm run release:mcp:tag 3.2.1
```

## ğŸ“ å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

### âœ… ä»£ç è´¨é‡æ£€æŸ¥
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š`npm run test:run`
- [ ] ä»£ç æ£€æŸ¥é€šè¿‡ï¼š`npm run lint:check`
- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡ï¼š`npm run typecheck`
- [ ] æ„å»ºæˆåŠŸï¼š`npm run build`
- [ ] **npx åŠŸèƒ½æµ‹è¯•é€šè¿‡**ï¼š`./test_npx_usage.sh`ï¼ˆæ–°å¢ï¼‰

### âœ… ç‰ˆæœ¬ç®¡ç†æ£€æŸ¥
- [ ] ä¸»é¡¹ç›®package.jsonç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] MCPå­åŒ…package.jsonç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] CHANGELOG.mdå·²æ›´æ–°
- [ ] ç‰ˆæœ¬è¯´æ˜æ–‡æ¡£å·²åˆ›å»º

### âœ… GitçŠ¶æ€æ£€æŸ¥
- [ ] å½“å‰åœ¨main/masteråˆ†æ”¯ï¼ˆæ¨èï¼‰
- [ ] å·¥ä½œåŒºå¹²å‡€ï¼Œæ— æœªæäº¤æ›´æ”¹
- [ ] é‡è¦æ›´æ”¹å·²æäº¤å¹¶æ¨é€

### âœ… ç¯å¢ƒé…ç½®æ£€æŸ¥
- [ ] NPMè®¤è¯å·²é…ç½®ï¼š`npm whoami`
- [ ] GitHub CLIè®¤è¯ï¼š`gh auth status`
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®ï¼ˆæœ¬åœ°å‘å¸ƒï¼‰
- [ ] GitHubä»“åº“secretså·²é…ç½®ï¼ˆCIå‘å¸ƒï¼‰

## ğŸ”§ ç¯å¢ƒé…ç½®è¯¦è§£

### å¿…éœ€å·¥å…·ç‰ˆæœ¬è¦æ±‚

```bash
# åŸºç¡€å·¥å…·
node --version    # >= 18.0.0 âœ…
npm --version     # >= 8.0.0 âœ…
git --version      # æ£€æŸ¥ç‰ˆæœ¬ âœ…

# GitHub CLIï¼ˆç”¨äºGitHub Releaseï¼‰
gh auth status     # æ£€æŸ¥è®¤è¯çŠ¶æ€ âœ…

# NPM è®¤è¯ï¼ˆæœ¬åœ°å‘å¸ƒéœ€è¦ï¼‰
npm whoami         # æ£€æŸ¥ç™»å½•çŠ¶æ€ âœ…
```

### è®¤è¯è®¾ç½®è¯¦ç»†æ­¥éª¤

#### 1. NPMè®¤è¯
```bash
# æ–¹æ³•1ï¼šäº¤äº’å¼ç™»å½•
npm login
# æŒ‰æç¤ºè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±

# æ–¹æ³•2ï¼šè®¾ç½®ç¯å¢ƒå˜é‡
export NPM_TOKEN="your_npm_token"
npm config set //registry.npmjs.org/:_authToken ${NPM_TOKEN}

# æ–¹æ³•3ï¼šä½¿ç”¨.npmrcæ–‡ä»¶
echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc
```

#### 2. GitHub CLIè®¤è¯
```bash
# æ£€æŸ¥è®¤è¯çŠ¶æ€
gh auth status

# é‡æ–°è®¤è¯
gh auth login
# é€‰æ‹©ï¼šGitHub.com (web) æˆ– GitHub CLI
# æŒ‰æç¤ºå®Œæˆè®¤è¯æµç¨‹

# æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡
export GITHUB_TOKEN="your_github_token"
```

#### 3. GitHubä»“åº“secretsé…ç½®
åœ¨GitHubä»“åº“è®¾ç½®ä¸­é…ç½®secretsï¼š
- `NPM_TOKEN`: NPMåŒ…å‘å¸ƒè®¤è¯ä»¤ç‰Œ
- `GITHUB_TOKEN`: GitHub Actionsè‡ªåŠ¨æä¾›

### Gitåˆ†æ”¯è¦æ±‚

- **æ¨è**ï¼šåœ¨ `main` æˆ– `master` åˆ†æ”¯å‘å¸ƒ
- **å¯é€‰**ï¼šå…¶ä»–åˆ†æ”¯ä¹Ÿå¯ä»¥å‘å¸ƒï¼ˆä¼šæœ‰è­¦å‘Šæç¤ºï¼‰
- **å·¥ä½œåŒºçŠ¶æ€**ï¼š
  - `localæ¨¡å¼`ï¼šå…è®¸æœ‰æœªæäº¤æ›´æ”¹ï¼ˆä¼šæç¤ºç¡®è®¤ï¼‰
  - `tag-onlyæ¨¡å¼`ï¼šæ¨èå·¥ä½œåŒºå¹²å‡€

## ğŸ‰ å‘å¸ƒåæ­¥éª¤

### 1. ç«‹å³éªŒè¯å®‰è£…
```bash
# ä¸»é¡¹ç›®éªŒè¯
npm install -g codex-father
codex-father --version

# MCPå­åŒ…éªŒè¯
npm install -g @starkdev020/codex-father-mcp-server
codex-mcp-server --version
```

### 2. æ›´æ–°ç›¸å…³æ–‡æ¡£
- æ›´æ–°é¡¹ç›®READMEä¸­çš„å®‰è£…è¯´æ˜
- æ›´æ–°ç‰ˆæœ¬ç›¸å…³æ–‡æ¡£
- æ›´æ–°APIæ–‡æ¡£ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯

### 3. å‘å¸ƒå…¬å‘Š
- æŠ€æœ¯åšå®¢æ–‡ç« 
- ç¤¾äº¤åª’ä½“é€šçŸ¥
- ç¤¾åŒºå…¬å‘Š
- GitHub Discussionsè®¨è®º

### 4. ç›‘æ§å’Œåé¦ˆ
- GitHub Issuesç›‘æ§
- NPMä¸‹è½½ç»Ÿè®¡è·Ÿè¸ª
- ç”¨æˆ·åé¦ˆæ”¶é›†
- ç¤¾åŒºè®¨è®ºå‚ä¸

## ğŸ”— ç›¸å…³æ–‡æ¡£å’Œèµ„æº

### ğŸ“– é¡¹ç›®æ–‡æ¡£
- [é¡¹ç›®README](../../README.md) - é¡¹ç›®æ€»ä½“è¯´æ˜
- [CHANGELOG](../../CHANGELOG.md) - å®Œæ•´å˜æ›´è®°å½•
- [CI/CDå‘å¸ƒæŒ‡å—](../../.github/CI_RELEASE_GUIDE.md) - CI/CDè¯¦ç»†æŒ‡å—
- [ç”¨æˆ·æ–‡æ¡£](../user/README.md) - ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- [å¼€å‘è€…æ–‡æ¡£](../developer/README.md) - å¼€å‘è€…æŒ‡å—

### ğŸ› ï¸ å·¥å…·å’Œè„šæœ¬
- [ä¸»é¡¹ç›®å‘å¸ƒè„šæœ¬](../../scripts/release.sh) - ä¸»é¡¹ç›®å‘å¸ƒè„šæœ¬
- [MCPå‘å¸ƒè„šæœ¬](../../scripts/release-mcp-manual.sh) - MCPæ‰‹åŠ¨å‘å¸ƒè„šæœ¬
- [å‚æ•°éªŒè¯å·¥å…·](../../lib/param_validator.sh) - å‚æ•°éªŒè¯å·¥å…·
- **[npx æµ‹è¯•è„šæœ¬](../../test_npx_usage.sh) - npx åŠŸèƒ½æµ‹è¯•è„šæœ¬**ï¼ˆæ–°å¢ï¼‰

### ğŸ”— å¤–éƒ¨é“¾æ¥
- **GitHub Repository**: https://github.com/yuanyuanyuan/codex-father
- **NPM Package - Main**: https://www.npmjs.com/package/codex-father
- **NPM Package - MCP**: https://www.npmjs.com/package/@starkdev020/codex-father-mcp-server
- **[npx ä½¿ç”¨æŒ‡å—](../../NPX_RELEASE_GUIDE.md) - å®Œæ•´çš„ npx ä½¿ç”¨æŒ‡å—**ï¼ˆæ–°å¢ï¼‰

### ğŸ“š å‚è€ƒèµ„æ–™
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/)
- [NPMå‘å¸ƒæ–‡æ¡£](https://docs.npmjs.com/cli/v8/commands/npm-publish)
- [GitHub Actionsæ–‡æ¡£](https://docs.github.com/en/actions)
- [GitHub Releaseæ–‡æ¡£](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository)

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### å‘å¸ƒå‰å‡†å¤‡
1. **å…ˆè¿è¡Œé¢„æ¼”æ¨¡å¼**ï¼šç¡®ä¿æ‰€æœ‰æ£€æŸ¥éƒ½é€šè¿‡
2. **å¤‡ä»½é‡è¦æ•°æ®**ï¼šé¿å…æ„å¤–ä¸¢å¤±å…³é”®æ–‡ä»¶
3. **æµ‹è¯•ç¯å¢ƒéªŒè¯**ï¼šåœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯æ–°ç‰ˆæœ¬
4. **æ–‡æ¡£å®Œæ•´æ€§**ï¼šç¡®ä¿ç‰ˆæœ¬è¯´æ˜æ–‡æ¡£å®Œæ•´å‡†ç¡®

### å‘å¸ƒè¿‡ç¨‹
1. **ä»”ç»†ç¡®è®¤ç‰ˆæœ¬å·**ï¼šé¿å…ç‰ˆæœ¬å·é”™è¯¯å¯¼è‡´æ··ä¹±
2. **å…³æ³¨æ‰€æœ‰æç¤ºä¿¡æ¯**ï¼šè„šæœ¬ä¼šæ˜¾ç¤ºè¯¦ç»†çš„æ“ä½œæç¤ºå’Œç¡®è®¤
3. **éªŒè¯æ¯ä¸ªæ­¥éª¤**ï¼šç¡®ä¿å‘å¸ƒæµç¨‹æ­£å¸¸å®Œæˆï¼Œæ— é”™è¯¯è·³è¿‡
4. **è®°å½•å‘å¸ƒä¿¡æ¯**ï¼šä¿å­˜å‘å¸ƒè¿‡ç¨‹ä¸­çš„é‡è¦ä¿¡æ¯

### å‘å¸ƒåè·Ÿè¿›
1. **ç«‹å³éªŒè¯**ï¼šç¡®ä¿åŒ…å¯ä»¥æ­£å¸¸å®‰è£…å’ŒåŸºç¡€ä½¿ç”¨
2. **æ›´æ–°ç›¸å…³æ–‡æ¡£**ï¼šåŠæ—¶æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡æ¡£å’Œè¯´æ˜
3. **é€šçŸ¥ç”¨æˆ·**ï¼šé€šè¿‡é€‚å½“æ¸ é“é€šçŸ¥ç”¨æˆ·æ–°ç‰ˆæœ¬å‘å¸ƒ
4. **ç›‘æ§åé¦ˆ**ï¼šå…³æ³¨ç”¨æˆ·åé¦ˆå’Œé—®é¢˜æŠ¥å‘Š

### ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
1. **è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šä¸¥æ ¼éµå¾ª `X.Y.Z` æ ¼å¼
2. **å‘å¸ƒèŠ‚å¥**ï¼šå»ºç«‹åˆç†çš„å‘å¸ƒèŠ‚å¥ï¼Œé¿å…è¿‡äºé¢‘ç¹æˆ–è¿‡äºç¨€ç–
3. **å˜æ›´è®°å½•**ï¼šè¯¦ç»†è®°å½•æ¯ä¸ªç‰ˆæœ¬çš„é‡è¦å˜æ›´
4. **å…¼å®¹æ€§**ï¼šç¡®ä¿å‘åå…¼å®¹æ€§ï¼Œé‡å¤§å˜æ›´æå‰é€šçŸ¥

---

## ğŸŠ æ€»ç»“

æ‰‹åŠ¨ç‰ˆæœ¬ç®¡ç†ä¸ºCodex Fatheré¡¹ç›®æä¾›äº†å®Œå…¨çš„æ§åˆ¶æƒå’Œçµæ´»æ€§ã€‚é€šè¿‡ä½¿ç”¨æœ¬æŒ‡å—å’Œé…å¥—çš„å‘å¸ƒè„šæœ¬ï¼Œå¼€å‘è€…å¯ä»¥ï¼š

- âœ… **ç²¾ç¡®æ§åˆ¶å‘å¸ƒæ—¶æœº**ï¼šè‡ªä¸»å†³å®šä½•æ—¶å‘å¸ƒæ–°ç‰ˆæœ¬
- âœ… **å®Œå…¨æŒæ¡ç‰ˆæœ¬å·**ï¼šæ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬å·ï¼Œé¿å…è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†çš„ä¸ç¡®å®šæ€§
- âœ… **å®‰å…¨å¯é çš„å‘å¸ƒæµç¨‹**ï¼šé€šè¿‡é¢„æ¼”æ¨¡å¼å’Œå¤šé‡æ£€æŸ¥ç¡®ä¿å‘å¸ƒè´¨é‡
- âœ… **çµæ´»çš„å‘å¸ƒæ¨¡å¼**ï¼šæ”¯æŒå¤šç§å‘å¸ƒåœºæ™¯ï¼Œé€‚åº”ä¸åŒéœ€æ±‚
- âœ… **å®Œæ•´çš„éªŒè¯ä½“ç³»**ï¼šä»æ„å»ºåˆ°å‘å¸ƒçš„å…¨æµç¨‹éªŒè¯

é€šè¿‡éµå¾ªæœ¬æŒ‡å—çš„æ­¥éª¤å’Œæœ€ä½³å®è·µï¼Œå¯ä»¥å®‰å…¨ã€é«˜æ•ˆåœ°å®Œæˆä¸»é¡¹ç›®å’ŒMCPå­åŒ…çš„å‘å¸ƒå·¥ä½œã€‚
