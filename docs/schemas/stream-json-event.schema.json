{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Codex-Father Stream-JSON Event (Minimal)",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "event": {
      "type": "string",
      "enum": [
        "start",
        "task_scheduled",
        "task_started",
        "tool_use",
        "task_completed",
        "task_failed",
        "task_retry_scheduled",
        "patch_generated",
        "patch_applied",
        "patch_failed",
        "patch_generation_failed",
        "instructions_updated",
        "task_execution_summary",
        "quick_validate_passed",
        "concurrency_reduced",
        "concurrency_increased",
        "resource_downscale",
        "resource_restore",
        "resource_exhausted",
        "session_workspace_updated",
        "manual_intervention_requested",
        "understanding_validated",
        "understanding_failed",
        "decomposition_completed",
        "decomposition_failed",
        "cancel_requested",
        "report_written",
        "report_write_failed",
        "orchestration_completed",
        "orchestration_failed"
      ]
    },
    "timestamp": { "type": "string", "format": "date-time" },
    "orchestrationId": { "type": "string" },
    "seq": { "type": "integer", "minimum": 0 },
    "taskId": { "type": "string" },
    "role": { "type": "string" },
    "agentId": { "type": "string" },
    "data": { "type": "object" }
  },
  "required": ["event", "timestamp", "orchestrationId", "seq", "data"],
  "examples": [
    {
      "event": "start",
      "timestamp": "2025-10-02T10:00:00Z",
      "orchestrationId": "orc_1",
      "seq": 1,
      "data": { "totalTasks": 10 }
    },
    {
      "event": "task_completed",
      "timestamp": "2025-10-02T10:03:05Z",
      "orchestrationId": "orc_1",
      "taskId": "t2",
      "role": "developer",
      "seq": 48,
      "data": { "durationMs": 180000, "outputsCount": 1 }
    }
  ]
}
