# 📖 场景化使用示例

> **15+ 实际使用场景**，包含完整的测试指令和预期输出，帮您快速上手 Codex Father。

## 📋 场景目录

1. [代码审查](#场景-1代码审查)
2. [重构代码](#场景-2重构代码)
3. [生成文档](#场景-3生成文档)
4. [性能优化](#场景-4性能优化)
5. [测试生成](#场景-5测试生成)
6. [Bug 修复](#场景-6bug-修复)
7. [依赖分析](#场景-7依赖分析)
8. [安全扫描](#场景-8安全扫描)
9. [代码迁移](#场景-9代码迁移)
10. [API 设计](#场景-10api-设计)

---

## 场景 1：代码审查

**场景描述**：让 AI 审查代码质量，关注类型安全和错误处理。

**测试指令**：
```
请审查 src/core/mcp/server.ts 的代码质量，重点关注：
1. 类型安全
2. 错误处理
3. 代码复杂度
4. 潜在的Bug
```

**预期输出**：
- 类型安全问题列表
- 错误处理改进建议
- 复杂函数识别
- Bug 风险评估

**实际应用**：
- 代码 Code Review
- PR 合并前检查
- 重构前评估

---

## 场景 2：重构代码

**场景描述**：识别并重构重复代码。

**测试指令**：
```
请分析 src/core/ 目录下的所有文件，识别重复代码，并提供重构建议
```

**预期输出**：
- 重复代码片段列表
- 重复率统计
- 重构方案建议
- 优先级排序

**实际应用**：
- 代码质量提升
- 技术债务清理
- 架构优化

---

## 场景 3：生成文档

**场景描述**：自动生成 API 文档。

**测试指令**：
```
为 src/core/mcp/server.ts 生成 API 文档，包括：
1. 所有公开方法
2. 参数说明
3. 返回值类型
4. 使用示例
```

**预期输出**：
- Markdown 格式的 API 文档
- 完整的方法签名
- 参数和返回值说明
- 代码示例

**实际应用**：
- 项目文档维护
- 新成员入职培训
- API 对外发布

---

## 场景 4：性能优化

**场景描述**：识别性能瓶颈并提供优化建议。

**测试指令**：
```
分析 src/core/process/manager.ts 的性能，识别：
1. 耗时操作
2. 内存占用大的代码
3. 可以并行化的操作
4. 优化建议
```

**预期输出**：
- 性能瓶颈识别
- 时间复杂度分析
- 优化方案列表
- 预期性能提升

**实际应用**：
- 性能调优
- 并发优化
- 资源管理

---

## 场景 5：测试生成

**场景描述**：自动生成单元测试。

**测试指令**：
```
为 src/core/approval/policy-engine.ts 生成单元测试，覆盖：
1. 所有公开方法
2. 边界条件
3. 错误情况
4. 使用 Vitest 框架
```

**预期输出**：
- 完整的测试文件
- 多种测试用例
- Mock 数据示例
- 断言覆盖

**实际应用**：
- 提升测试覆盖率
- TDD 开发
- 回归测试

---

## 场景 6：Bug 修复

**场景描述**：定位并修复 Bug。

**测试指令**：
```
系统报错："Cannot read property 'status' of undefined"
错误发生在 src/core/session/session-manager.ts:45
请帮我：
1. 分析错误原因
2. 提供修复方案
3. 添加防御性代码
```

**预期输出**：
- 错误根因分析
- 修复代码
- 防御性检查
- 测试用例

**实际应用**：
- Bug 排查
- 紧急修复
- 健壮性提升

---

## 场景 7：依赖分析

**场景描述**：分析项目依赖关系。

**测试指令**：
```
分析 package.json，告诉我：
1. 有哪些过时的依赖
2. 有哪些安全漏洞
3. 依赖体积分析
4. 升级建议
```

**预期输出**：
- 过时依赖列表
- 安全漏洞报告
- 体积占用统计
- 升级优先级

**实际应用**：
- 依赖管理
- 安全审计
- 包大小优化

---

## 场景 8：安全扫描

**场景描述**：扫描代码中的安全问题。

**测试指令**：
```
扫描 src/ 目录，查找潜在的安全问题：
1. SQL 注入风险
2. XSS 漏洞
3. 敏感信息泄露
4. 不安全的依赖使用
```

**预期输出**：
- 安全问题列表
- 严重程度评级
- 修复建议
- 最佳实践推荐

**实际应用**：
- 安全审计
- 合规检查
- 安全加固

---

## 场景 9：代码迁移

**场景描述**：将代码从一种技术栈迁移到另一种。

**测试指令**：
```
请将 src/legacy/old-module.js（CommonJS）迁移到 TypeScript + ES Modules：
1. 转换语法
2. 添加类型注解
3. 使用现代语法特性
4. 保持功能一致
```

**预期输出**：
- 迁移后的 TypeScript 代码
- 类型定义
- 迁移说明文档
- 测试验证方案

**实际应用**：
- 技术栈升级
- 代码现代化
- 架构重构

---

## 场景 10：API 设计

**场景描述**：设计 RESTful API 接口。

**测试指令**：
```
为用户管理模块设计 RESTful API：
1. 用户 CRUD 操作
2. 认证和授权
3. 请求/响应格式
4. 错误处理
5. OpenAPI 规范
```

**预期输出**：
- API 端点列表
- 请求/响应示例
- OpenAPI/Swagger 文档
- 实现建议

**实际应用**：
- API 设计
- 前后端协作
- 接口文档化

---

## 📊 使用统计

根据用户反馈，最常用的场景是：

1. **代码审查**（40%） - 提升代码质量
2. **文档生成**（25%） - 节省时间
3. **Bug 修复**（15%） - 提高效率
4. **测试生成**（10%） - 提升覆盖率
5. **其他**（10%） - 各种场景

---

## 🔗 更多场景

- [Claude Desktop 专属场景](claude-desktop.md)
- [Claude Code 专属场景](claude-code.md)
- [Codex CLI 专属场景](codex-cli.md)

---

**💡 提示**：以上场景都可以根据实际项目调整指令内容。建议从简单场景开始，逐步尝试复杂场景。
