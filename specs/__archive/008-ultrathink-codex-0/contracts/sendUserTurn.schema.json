{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "sendUserTurn",
  "description": "Send a structured user turn with explicit control parameters",
  "dataSource": "refer-research/openai-codex/codex-rs/docs/codex_mcp_interface.md:68",
  "minVersion": "0.42.0",
  "request": {
    "type": "object",
    "properties": {
      "conversationId": {
        "type": "string",
        "description": "ID of the conversation"
      },
      "items": {
        "type": "array",
        "description": "Array of message items",
        "items": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["text", "image"]
            },
            "text": { "type": "string" },
            "imageUrl": { "type": "string" }
          },
          "required": ["type"]
        },
        "minItems": 1
      },
      "cwd": {
        "type": "string",
        "description": "Working directory override for this turn"
      },
      "approvalPolicy": {
        "type": "string",
        "enum": ["untrusted", "on-request", "on-failure", "never"],
        "description": "Approval policy override for this turn"
      },
      "sandboxPolicy": {
        "type": "string",
        "enum": ["read-only", "workspace-write", "danger-full-access"],
        "description": "Sandbox policy override for this turn"
      },
      "model": {
        "type": "string",
        "description": "Model override for this turn"
      },
      "effort": {
        "type": "string",
        "enum": ["low", "medium", "high"],
        "description": "Reasoning effort for this turn (Codex 0.44+ only)",
        "minVersion": "0.44.0"
      },
      "summary": {
        "type": "string",
        "enum": ["auto", "always", "never"],
        "description": "Reasoning summary mode for this turn (Codex 0.44+ only)",
        "minVersion": "0.44.0"
      }
    },
    "required": ["conversationId", "items"],
    "additionalProperties": false
  },
  "response": {
    "type": "object",
    "properties": {
      "accepted": {
        "type": "boolean",
        "description": "Whether the turn was accepted"
      }
    },
    "required": ["accepted"],
    "additionalProperties": false
  },
  "versionSpecificParams": {
    "effort": {
      "minVersion": "0.44.0",
      "incompatibleBehavior": "Returns JSON-RPC error: Invalid params: 'effort' requires Codex >= 0.44 (current: {version})"
    },
    "summary": {
      "minVersion": "0.44.0",
      "incompatibleBehavior": "Returns JSON-RPC error: Invalid params: 'summary' requires Codex >= 0.44 (current: {version})"
    }
  }
}
